---
description: 验收标准模式 - 正向、边界、异常场景
---

# 验收标准模式

## 概述
验收标准模式是常见验收场景的总结，帮助快速编写完整的验收标准。

## 场景分类

```
正向场景 → 边界场景 → 异常场景 → 性能场景
```

## 1. 正向场景模式

### 1.1 模式说明

描述功能在正常情况下的预期行为。

### 1.2 标准模板

```gherkin
Given [正常前置条件]
And [其他正常条件]
When [触发正常操作]
Then [产生预期结果]
And [其他预期结果]
```

### 1.3 常见模式

#### 基础功能正常工作

```gherkin
## AC-1: 用户注册成功

Given 用户在注册页面
And 输入有效的手机号
And 输入符合要求的密码
And 同意用户协议
When 点击注册按钮
Then 注册成功
And 自动登录
And 跳转到首页
```

#### 数据查询正常返回

```gherkin
## AC-1: 搜索商品

Given 用户在搜索页面
And 输入搜索关键词"手机"
When 点击搜索按钮
Then 显示商品列表
And 列表包含与"手机"相关的商品
And 按相关度排序
```

#### 数据提交成功

```gherkin
## AC-1: 提交订单

Given 用户已选择商品
And 已填写收货地址
And 已选择支付方式
When 点击提交订单按钮
Then 订单创建成功
And 跳转到支付页面
And 显示订单金额
```

### 1.4 编写要点

- [ ] 前置条件合理
- [ ] 触发操作明确
- [ ] 预期结果可验证
- [ ] 结果可观察

## 2. 边界场景模式

### 2.1 模式说明

描述功能在边界条件下的行为，确保边界处理正确。

### 2.2 标准模板

```gherkin
Given [边界前置条件]
When [触发操作]
Then [正确的边界处理]
```

### 2.3 常见模式

#### 数值边界

```gherkin
## AC-2: 库存为0时

Given 商品库存为0
When 用户尝试购买
Then 显示"商品已售罄"
And 不允许下单
```

```gherkin
## AC-3: 库存充足时

Given 商品库存为100
And 用户购买1件
When 用户下单
Then 订单创建成功
And 库存减少为99
```

#### 时间边界

```gherkin
## AC-2: 会员到期当天

Given 用户会员今天到期
When 时间到达00:00
Then 会员状态变为已过期
And 会员权益失效
```

```gherkin
## AC-3: 会员刚开通

Given 用户刚刚开通会员（23:59）
When 当日00:00到达
Then 不发放当日权益
And 从次日开始发放
```

#### 数据量边界

```gherkin
## AC-2: 列表为空时

Given 用户没有订单
When 进入订单页面
Then 显示"暂无订单"
And 显示引导按钮
```

```gherkin
## AC-3: 列表数据很多

Given 用户有100+条订单
When 进入订单页面
Then 分页显示
And 每页20条
```

#### 输入边界

```gherkin
## AC-2: 最小长度

Given 用户输入昵称为1个字符
When 点击保存
Then 提示"昵称长度2-20个字符"
```

```gherkin
## AC-3: 最大长度

Given 用户输入昵称为21个字符
When 点击保存
Then 提示"昵称长度2-20个字符"
And 自动截断为20个字符
```

### 2.4 边界值清单

```markdown
## 常见边界值

### 数值
- 0
- 最大值-1
- 最大值
- 最大值+1

### 字符串
- 空字符串
- 1个字符
- 最大长度-1
- 最大长度
- 最大长度+1

### 时间
- 开始时间前
- 开始时间
- 结束时间
- 结束时间后

### 列表
- 空列表
- 1条数据
- 最大数据量
```

## 3. 异常场景模式

### 3.1 模式说明

描述功能在异常情况下的处理方式，确保优雅降级。

### 3.2 标准模板

```gherkin
Given [异常前置条件]
When [触发操作]
Then [优雅的错误处理]
And [不影响其他功能]
```

### 3.3 常见模式

#### 网络异常

```gherkin
## AC-4: 网络不可用

Given 用户设备没有网络连接
When 点击提交按钮
Then 显示"网络连接失败，请检查网络"
And 提供重试按钮
And 数据保存在本地
```

```gherkin
## AC-5: 网络超时

Given 服务器响应超时（>30秒）
When 点击提交按钮
Then 显示"请求超时，请重试"
And 提供重试按钮
```

#### 服务器错误

```gherkin
## AC-6: 服务器错误（500）

Given 服务器返回500错误
When 点击提交按钮
Then 显示"服务器异常，请稍后重试"
And 错误日志记录
```

```gherkin
## AC-7: 服务不可用（503）

Given 服务器返回503错误
When 点击提交按钮
Then 显示"服务维护中，请稍后再来"
And 显示预计恢复时间
```

#### 数据异常

```gherkin
## AC-8: 数据不存在

Given 查询的商品ID不存在
When 访问商品详情页
Then 显示"商品不存在或已下架"
And 推荐相似商品
```

```gherkin
## AC-9: 数据格式错误

Given 服务器返回数据格式异常
When 加载页面
Then 显示"数据加载失败"
And 提供刷新按钮
And 错误日志记录
```

#### 权限异常

```gherkin
## AC-10: 未登录

Given 用户未登录
When 访问需要登录的页面
Then 跳转到登录页
And 显示"请先登录"
And 登录后返回原页面
```

```gherkin
## AC-11: 权限不足

Given 普通用户访问管理员功能
When 访问管理员页面
Then 显示"无权限访问"
And 返回首页
```

#### 业务异常

```gherkin
## AC-12: 余额不足

Given 用户余额为10元
And 商品价格为20元
When 尝试购买
Then 显示"余额不足，请充值"
And 提供充值入口
```

```gherkin
## AC-13: 重复操作

Given 用户已提交订单
When 重复点击提交按钮
Then 提示"订单已提交，请勿重复操作"
And 不创建重复订单
```

### 3.4 异常处理原则

```markdown
## 异常处理原则

### 用户友好
- 错误信息清晰易懂
- 提供解决建议
- 不显示技术错误

### 数据保护
- 本地数据不丢失
- 提供重试机制
- 支持断点续传

### 日志记录
- 记录异常信息
- 记录用户操作
- 便于问题排查
```

## 4. 性能场景模式

### 4.1 模式说明

描述功能的性能要求。

### 4.2 标准模板

```gherkin
Given [性能测试条件]
When [执行操作]
Then [满足性能指标]
```

### 4.3 常见模式

#### 响应时间

```gherkin
## AC-14: 页面加载性能

Given 用户网络正常（4G）
When 打开商品详情页
Then 页面在2秒内完成加载
And 首屏内容在1秒内显示
```

#### 并发性能

```gherkin
## AC-15: 并发下单

Given 1000个用户同时下单
When 执行下单操作
Then 所有订单成功创建
And 响应时间<3秒
And 无数据不一致
```

#### 数据量性能

```gherkin
## AC-16: 大列表性能

Given 订单列表有10000条数据
When 加载订单页面
Then 首屏在2秒内显示
And 滚动流畅（60fps）
```

### 4.4 性能指标清单

```markdown
## 常见性能指标

### 响应时间
- 首屏加载：<2秒
- 接口响应：<500ms
- 页面跳转：<1秒

### 并发能力
- 同时在线：XXX人
- 峰值TPS：XXX
- 数据库连接：XXX

### 资源占用
- 内存占用：<XXX MB
- CPU占用：<XXX%
- 电量消耗：低
```

## 5. 完整验收标准示例

### 5.1 会员每日点券发放

```gherkin
## 用户故事：会员每日点券发放

作为 会员用户
我想要 每天自动获得100点券
以便 我可以使用点券兑换商品

## 验收标准

### AC-1: 正常发放
Given 用户是有效会员（状态=生效中）
And 开通时间超过24小时
When 时间到达每日00:00
Then 用户账户增加100点券
And 用户收到点券到账通知
And 点券有效期30天

### AC-2: 边界-刚开通
Given 用户刚刚开通会员（23:59）
When 当日00:00到达
Then 不发放当日点券
And 从次日开始发放

### AC-3: 边界-会员到期
Given 用户会员今天到期
When 时间到达00:00
Then 不再发放点券
And 会员权益失效

### AC-4: 异常-服务故障
Given 用户是有效会员
When 点券发放服务故障
Then 记录发放失败日志
And 服务恢复后24小时内补发
And 不影响用户其他功能

### AC-5: 性能要求
Given 有100万会员用户
When 每日00:00批量发放
Then 所有用户在30分钟内发放完成
And 服务不中断
```

## 6. 验收标准检查清单

```markdown
## 验收标准完整性检查

### 场景覆盖
- [ ] 正常场景已覆盖
- [ ] 边界场景已覆盖
- [ ] 异常场景已覆盖
- [ ] 性能要求已定义

### 标准质量
- [ ] Given-When-Then格式正确
- [ ] 前置条件明确
- [ ] 触发操作清晰
- [ ] 预期结果可验证

### 完整性
- [ ] 覆盖所有输入组合
- [ ] 覆盖所有业务规则
- [ ] 覆盖所有异常情况

### 可测试性
- [ ] 可转化为测试用例
- [ ] 可自动化测试
- [ ] 结果可观察
```

## 7. 编写技巧

### 7.1 场景独立

```
❌ 多个场景混在一起
✅ 每个AC一个场景

❌ 场景之间依赖
✅ 场景相互独立
```

### 7.2 描述具体

```
❌ 显示错误信息
✅ 显示"用户名或密码错误"

❌ 快速响应
✅ 3秒内返回结果
```

### 7.3 可观察

```
❌ 处理成功
✅ 返回成功状态码200

❌ 数据保存
✅ 数据库中可查询到该记录
```

## 8. 常见错误

### 8.1 场景遗漏

```gherkin
❌ 只有正常场景
✅ 正常+边界+异常

❌ 边界考虑不全
✅ 考虑所有边界值
```

### 8.2 描述模糊

```gherkin
❌ 应该很快
✅ 3秒内完成

❌ 正确处理
✅ 返回错误码XXX
```

### 8.3 不可测试

```gherkin
❌ 用户体验好
✅ 用户满意度>4.5分

❌ 系统稳定
✅ 崩溃率<0.01%
```
