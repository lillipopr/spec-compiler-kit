---
description: 功能定义工作流 - 需求分析到 PRD 编写
---

# 功能定义工作流

## 概述
功能定义是将需求转化为可执行的产品需求文档（PRD）的过程，定义清楚"做什么"、"为什么做"、"做到什么程度"。

## 适用场景

- 新功能开发
- 功能优化
- Bug修复（需要详细定义时）

## 工作流程

```
需求理解 → 用户分析 → 功能设计 → 范围界定 → PRD编写 → Review
```

## 1. 需求理解

### 1.1 需求来源分析

| 来源 | 分析重点 |
|-----|---------|
| **业务方需求** | 业务目标、成功标准 |
| **用户反馈** | 痛点、使用场景 |
| **数据洞察** | 数据异常、优化机会 |
| **战略规划** | 战略方向、优先级 |

### 1.2 需求澄清

与需求方沟通，明确：

```markdown
## 需求澄清清单
- 为什么做？（背景和目标）
- 做给谁用？（目标用户）
- 什么时候需要？（时间要求）
- 成功标准是什么？（量化指标）
- 有什么约束？（资源、技术、时间）
```

### 1.3 需求记录

使用统一格式：

```markdown
## 需求记录

### 背景
- 业务背景：XXX
- 用户痛点：XXX

### 目标
- 核心目标：XXX
- 量化指标：XXX

### 约束
- 时间约束：XXX
- 资源约束：XXX
- 技术约束：XXX
```

## 2. 用户分析

### 2.1 用户角色定义

参见：[用户故事编写方法论](../methodology/user-story-writing.md)

```markdown
## 用户角色

### 主要角色
- 角色1：XXX
  - 画像：XXX
  - 场景：XXX

### 次要角色
- 角色2：XXX
  - 画像：XXX
  - 场景：XXX
```

### 2.2 用户场景梳理

梳理用户使用场景：

```markdown
## 用户场景

### 场景1：XXX
- 触发条件：XXX
- 用户目标：XXX
- 操作流程：XXX
- 预期结果：XXX

### 场景2：XXX
...
```

### 2.3 用户流程图

绘制用户流程，识别关键路径：

```
用户 → 进入 → 操作1 → 操作2 → 操作3 → 完成
         ↓                      ↓
      退出                   异常处理
```

## 3. 功能设计

### 3.1 功能列表

列出所有功能点：

```markdown
## 功能列表

### 核心功能
- 功能1：XXX（优先级P0）
- 功能2：XXX（优先级P0）

### 扩展功能
- 功能3：XXX（优先级P1）
- 功能4：XXX（优先级P2）

### 未来功能
- 功能5：XXX（未来版本）
```

### 3.2 用户故事编写

参见：[用户故事编写方法论](../methodology/user-story-writing.md)

每个功能编写用户故事：

```gherkin
## 功能1：XXX

### 用户故事
作为 [用户角色]
我想要 [执行的操作]
以便 [获得的价值]

### 验收标准
#### AC-1: 正常场景
Given [前置条件]
When [触发动作]
Then [预期结果]

#### AC-2: 边界场景
...

#### AC-3: 异常场景
...
```

### 3.3 交互设计（如有需要）

- 绘制原型图
- 定义交互流程
- 标注交互细节

## 4. 范围界定

### 4.1 In Scope（本期包含）

明确本期要做的功能：

```markdown
## In Scope

### P0（必须有）
- 功能1：XXX
- 功能2：XXX

### P1（重要）
- 功能3：XXX
- 功能4：XXX

### P2（可以做）
- 功能5：XXX
```

### 4.2 Out of Scope（本期不含）

明确本期不做的功能及原因：

```markdown
## Out of Scope

### 未来版本
- 功能X：XXX（二期考虑）
- 功能Y：XXX（需求不明确，暂缓）

### 不考虑
- 功能Z：XXX（不符合产品定位）
```

### 4.3 依赖识别

识别上下文依赖：

```markdown
## 依赖

### 上游依赖
- 系统A的XXX接口
- 系统B的XXX功能

### 下游依赖
- 系统C需要我们提供XXX

### 横向依赖
- 与XXX项目并行开发
```

## 5. PRD编写

### 5.1 PRD结构

```markdown
# 产品需求文档（PRD）

## 1. 文档信息
- 需求编号：XXX
- 版本：V1.0
- 作者：XXX
- 日期：XXX

## 2. 背景与目标
### 2.1 业务背景
- 为什么做
- 解决什么问题

### 2.2 业务目标
- 核心目标
- 量化指标

## 3. 用户分析
### 3.1 目标用户
- 用户角色
- 用户画像

### 3.2 使用场景
- 场景1
- 场景2

## 4. 功能范围
### 4.1 In Scope
- 功能列表

### 4.2 Out of Scope
- 不做列表

### 4.3 依赖
- 依赖关系

## 5. 用户故事与验收标准
### 5.1 功能1
- 用户故事
- 验收标准

### 5.2 功能2
...

## 6. 非功能需求
### 6.1 性能要求
### 6.2 安全要求
### 6.3 兼容性要求

## 7. 数据与埋点
### 7.1 数据需求
### 7.2 埋点需求

## 8. 风险评估
| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
```

### 5.2 PRD模板

详见：[PRD模板](../templates/tpl-prd.md)

## 6. Review

### 6.1 Review检查清单

```markdown
## PRD质量检查

### 完整性
- [ ] 背景和目标清晰
- [ ] 用户角色明确
- [ ] 用户故事完整
- [ ] 验收标准可测
- [ ] In/Out Scope明确
- [ ] 依赖已识别
- [ ] 风险已评估

### 质量标准
- [ ] 每个用户故事符合INVEST
- [ ] 验收标准使用Given-When-Then
- [ ] 验收标准覆盖正向/边界/异常场景
- [ ] 成功指标可量化
- [ ] 无"优化体验"等模糊描述
- [ ] 无技术实现细节

### 可追溯性
- [ ] 需求有唯一编号
- [ ] 用户故事关联需求编号
- [ ] 验收标准关联用户故事
```

### 6.2 Review流程

```markdown
## PRD Review流程

### 1. 自查
- 使用检查清单自查
- 修改问题

### 2. 内部评审
- 邀请相关人员评审
- 收集反馈

### 3. 修改完善
- 根据反馈修改
- 重大修改再次Review

### 4. 正式发布
- 发送给下游团队
- 讲解PRD
- 确认理解一致
```

### 6.3 Review输出

```markdown
# PRD Review结果

## Review信息
- PRD编号：XXX
- Review时间：XXX
- 参与人：XXX

## Review结论
- [ ] 通过
- [ ] 有条件通过（需修改XXX）
- [ ] 不通过（需重写）

## 修改意见
1. ...
2. ...

## 后续行动
- [ ] 修改PRD
- [ ] 进入Stage 2 DDD设计
```

## 7. 常见问题

### 7.1 PRD写到多细？

**原则**：写到能让架构师理解业务意图即可

```
❌ 太粗：用户可以订阅会员
✅ 合适：用户可以订阅月度/年度会员，订阅后每天获得100点券
❌ 太细：点击订阅按钮后调用 /api/membership/subscribe 接口
```

### 7.2 验收标准和测试用例的区别？

- **验收标准**：业务视角，描述"什么是正确的"
- **测试用例**：技术视角，描述"如何验证正确"

验收标准在PRD中定义，测试用例在Stage 3推导。

### 7.3 需求变更怎么处理？

1. 更新PRD文档
2. 评估对下游影响
3. 触发受影响阶段重新Review

## 8. 关键产出

| 阶段 | 产出物 |
|-----|--------|
| 需求理解 | 需求记录 |
| 用户分析 | 用户角色、场景 |
| 功能设计 | 功能列表、用户故事 |
| 范围界定 | In/Out Scope |
| PRD编写 | PRD文档 |
| Review | Review结果 |

## 9. 下一步

PRD通过后，进入 **Stage 2: DDD Design**
