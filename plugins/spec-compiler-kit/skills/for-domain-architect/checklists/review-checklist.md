---
description: DDD 设计审查清单
---

# DDD 设计审查清单

## 概述

本检查清单用于 DDD 设计的全面审查，确保设计符合 DDD 原则和最佳实践。

## 审查维度

### 1. 战略设计审查

#### 限界上下文

- [ ] 上下文边界清晰，职责单一
- [ ] 上下文内部语言一致
- [ ] 上下文可独立部署
- [ ] 上下文类型正确识别（核心/支撑/通用/泛化）
- [ ] 上下文数量合理（不过多也不过少）

#### 上下文映射

- [ ] 上下游关系明确
- [ ] 映射模式正确选择（O/C, D, ACL, PL, CF）
- [ ] 集成方式合理（同步/异步）
- [ ] 防腐层需求已识别
- [ ] 上下文映射图完整

#### 团队对齐

- [ ] 一个上下文对应一个团队
- [ ] 团队规模合理（3-7 人）
- [ ] 团队职责与上下文匹配
- [ ] 沟通路径清晰

### 2. 战术设计审查

#### 聚合设计

- [ ] 聚合根正确识别
- [ ] 聚合边界合理（小聚合）
- [ ] 聚合内强一致
- [ ] 聚合间最终一致
- [ ] 一个事务只修改一个聚合

#### 实体与值对象

- [ ] 实体和值对象正确区分
- [ ] 实体有唯一标识
- [ ] 值对象不可变
- [ ] 值对象相等性正确实现
- [ ] 避免原语偏执

#### 领域事件

- [ ] 事件命名符合规范（过去式）
- [ ] 事件携带数据最小化
- [ ] 事件发布时机明确
- [ ] 事件订阅者清晰
- [ ] 事件处理幂等

#### 领域服务

- [ ] 领域服务职责单一
- [ ] 不属于实体或聚合的行为
- [ ] 涉及多聚合协作
- [ ] 领域服务命名清晰

#### 仓储接口

- [ ] 仓储针对聚合根
- [ ] 仓储方法有业务语义
- [ ] 仓储隐藏持久化细节
- [ ] 仓储接口完整

### 3. 建模原则审查

#### 通用语言

- [ ] 术语统一
- [ ] 代码和文档一致
- [ ] 团队使用相同语言
- [ ] 术语表完整

#### 业务规则

- [ ] 业务规则显式编码
- [ ] 不变量已识别
- [ ] 不变量在聚合内强制
- [ ] 业务规则文档化

#### 架构分层

- [ ] 分层清晰
- [ ] 依赖方向正确
- [ ] 防腐层已设计
- [ ] 持久化已隔离

### 4. 可追溯性审查

- [ ] 设计可追溯到需求
- [ ] 需求可追溯到设计
- [ ] 设计可追溯到代码
- [ ] 代码可追溯到设计

## 审查问题

### 战略设计问题

```
Q1: 为什么这是核心域？
A: {业务价值和技术差异}

Q2: 为什么上下文这样划分？
A: {划分原因}

Q3: 上下文间为什么这样映射？
A: {映射原因}

Q4: 上下文可以独立部署吗？
A: ✅/❌ {原因}
```

### 战术设计问题

```
Q1: 为什么这是聚合根？
A: {三个必要条件}

Q2: 为什么聚合这样设计？
A: {设计原因}

Q3: 聚合大小合理吗？
A: ✅/❌ {原因}

Q4: 实体和值对象为什么这样区分？
A: {区分原因}
```

### 建模原则问题

```
Q1: 通用语言统一吗？
A: ✅/❌ {例子}

Q2: 业务规则显式吗？
A: ✅/❌ {例子}

Q3: 架构分层正确吗？
A: ✅/❌ {原因}
```

## 审查等级

### CRITICAL（关键）

设计存在严重问题，必须修复才能继续：

- 上下文边界不清
- 聚合设计错误
- 缺少防腐层导致外部变化影响内部
- 不变量未封装

### HIGH（高）

设计存在明显问题，强烈建议修复：

- 聚合太大
- 实体和值对象混淆
- 领域事件命名不规范
- 通用语言不统一

### MEDIUM（中）

设计存在可优化点：

- 上下文数量可优化
- 聚合边界可优化
- 仓储方法可补充

### LOW（低）

设计存在小改进点：

- 命名可优化
- 文档可完善
- 注释可补充

## 审查流程

### 1. 自我审查

```
设计者完成设计后：
1. 使用本检查清单自我审查
2. 修复 CRITICAL 和 HIGH 问题
3. 准备设计文档
```

### 2. 同伴审查

```
由其他架构师审查：
1. 检查 CRITICAL 和 HIGH 项
2. 提出改进建议
3. 讨论和解决争议
```

### 3. 团队审查

```
团队集体审查：
1. 演示设计
2. 讨论争议点
3. 达成共识
4. 记录决策
```

## 审查结果

### 通过条件

- [ ] 没有 CRITICAL 问题
- [ ] HIGH 问题已修复或说明原因
- [ ] MEDIUM 和 LOW 问题已记录
- [ ] 团队达成共识

### 审查报告

```markdown
# DDD 设计审查报告

## 设计概述
{设计概述}

## 审查结果
- CRITICAL: {数量} 个
- HIGH: {数量} 个
- MEDIUM: {数量} 个
- LOW: {数量} 个

## 问题列表

### CRITICAL 问题
1. {问题描述}
   - 位置: {位置}
   - 建议: {建议}

### HIGH 问题
{同上}

## 审查结论
✅ 通过 / ❌ 不通过

## 下一步行动
{下一步行动}
```

## 参考资料

- Domain-Driven Design (Eric Evans)
- Implementing Domain-Driven Design (Vaughn Vernon)
- Strategic Domain-Driven Design (Vaughn Vernon)
