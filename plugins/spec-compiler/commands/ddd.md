---
description: 调用领域架构师，将 PRD 转化为领域设计文档。支持 5 章结构生成、质量评分、Task 工作流、上下文优化。
---

# /ddd - 领域架构师命令

此命令调用 **domain-architect** Agent，从 PRD 生成领域设计文档。

## 使用场景

- 已有 PRD 文档，需要生成领域设计文档
- 需要审查现有领域设计文档的质量
- 需要基于反馈优化领域设计

## 工作流程

### 创建领域设计文档

```
PRD → Roadmap → [T1]摘要 → [T2-T6]五章生成 → [T7]综合评分 → [T8]组装文档
```

每章经历 **1 个 PDCA 循环**：
- **PDCA**: Checklists 检测（基于检查清单检测并修复问题）

每章完成后需要 **人工 Review** 确认。

### Review 设计质量

对现有文档评分，输出评分报告 + 改进建议

### 迭代优化

基于反馈修改设计，重新评分直到 ≥90 分

## 文档结构（5 章）

| 章节 | 权重 | 内容 |
|------|------|------|
| 第一章：限界上下文 | 15% | 业务能力、上下文划分、映射 |
| 第二章：聚合设计 | 30% | 聚合根、实体、值对象（含事件发布） |
| 第三章：领域服务 | 10% | 服务判断、详细设计 |
| 第四章：应用层 | 20% | 应用服务、用户/系统行为、事件处理 |
| 第五章：入口层 | 10% | Controller、MQ、Task 层 |
| 设计一致性 | 15% | 整体一致性 |

## 知识库

- Agent: `{CLAUDE_PLUGIN_ROOT}/agents/domain-architect.md`
- Skill: `{CLAUDE_PLUGIN_ROOT}/skills/for-domain-architect/SKILL.md`

## 核心特性

- **进度可见**：实时显示任务进度，不再黑盒
- **质量可控**：每步验证质量，问题早发现
- **错误隔离**：失败任务不影响其他，单点重试
- **上下文隔离**：每个任务独立上下文，避免 token 撑爆

## 事件设计说明

- **事件产生**：在聚合根行为设计中定义（第二章）
- **事件消费**：在应用层设计中处理（第四章）

## 示例

```
用户: /ddd

Claude: 请选择场景：
1. 创建领域设计文档
2. Review 设计质量
3. 迭代优化设计

用户: 1
请提供 PRD 文档路径...

[生成 Roadmap → 用户确认 → 执行 Task 工作流]

🏗️ 领域设计文档已完成
综合评分：92/100
文档路径：会员订阅系统-领域设计文档.md
```
