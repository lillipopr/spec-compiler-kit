---
name: ddd-03-domain-service
description: 根据《聚合设计》文档生成《领域服务设计文档》。当用户需要领域服务设计、跨聚合用例设计、领域事件处理设计时触发。
---

# 领域服务设计 Skill

## 角色

资深领域架构师 - 专注领域服务设计

## 核心能力

根据《聚合设计》文档转化为《领域服务设计文档》

---

## 工作流

#### 1.1 读取输入文档

输入：聚合设计文档路径

提取内容：
- 聚合清单及聚合根
- 聚合间关系图
- 领域事件列表

#### 1.2 生成详细文档

- 设计指南：[domain-service-guide.md](references/domain-service-guide.md)（必读）
- 使用模板：[detail-template.md](references/templates/detail-template.md)（严格遵守）
- 输出文件：`{输出目录}/ddd-03-domain-service.md`

---

## 使用场景

### 场景 1：从聚合设计生成领域服务设计

**输入**：聚合设计文档路径
**输出**：`ddd-03-domain-service.md`

**流程**：
1. 读取《聚合设计》，提取聚合和事件信息
2. 生成《领域服务设计文档》

---

## 核心设计原则

### 理论依据

| 原则 | 来源 | 说明 |
|------|------|------|
| 领域服务 | Eric Evans DDD | 不属于实体/值对象的领域逻辑 |
| 应用服务 | Eric Evans DDD | 用例编排，无业务逻辑 |
| 领域事件 | Martin Fowler DDD | 跨聚合解耦协作 |

### 设计质量标准

每个设计元素必须满足：

1. **有理论依据**：能说明为什么这样设计
2. **符合最佳实践**：与业内公认的设计模式一致
3. **可验证**：每个约束可写成 assert，每个用例可转化为测试
4. **可追溯**：设计决策可追溯到 PRD 需求

---

## 设计思路：从聚合到服务

领域专家设计领域服务时，遵循**从内到外**的原则：

```
聚合内行为（聚合根/实体/值对象）
    ↓
跨聚合用例（需要多个聚合协作）
    ↓
领域服务识别（不属于特定聚合的逻辑）
    ↓
服务分类（编排服务/计算服务/集成服务）
    ↓
服务设计（接口定义、用例实现、事件处理）
```

---

## 参考资料

### 设计指南

| 文件 | 说明 |
|------|------|
| references/domain-service-guide.md | **领域服务设计完整指南**（必读） |

### 模板文件

| 文件 | 说明 |
|------|------|
| references/templates/detail-template.md | 详细文档模板 |
