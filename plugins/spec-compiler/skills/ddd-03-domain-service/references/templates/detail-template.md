# 第三章：领域服务设计

## 章节目标
完成领域服务设计，包括：
1. **领域服务判断**：判断哪些逻辑应该设计为领域服务
2. **服务列表**：列出所有领域服务
3. **服务详细设计**：设计每个领域服务的方法、职责、约束
4. **服务用例设计**：设计每个领域服务的方法的测试用例

---

## 1. 领域服务列表

| 服务名称 | 职责 | 涉及聚合 | 优先级 |
|---------|------|---------|--------|
| {服务1} | {职责描述} | {聚合A}, {聚合B} | P0 |
| {服务2} | {职责描述} | {聚合C} | P1 |

---

## 2. 领域服务详细设计

### 2.1 {领域服务名称1} 详细设计

**基本信息**

| 字段 | 值 |
|------|-----|
| 服务名称 | {服务名称} |
| 职责 | {职责描述} |
| 涉及聚合 | {聚合A}, {聚合B} |
| 优先级 | P0 |

**方法列表**

| 行为名称 | 参数 | 返回值 | 业务规则 | 领域事件   |
| -------- | ---- | ------ | -------- |--------|
| {方法1}() | {参数列表} | {返回类型} | {业务规则描述} | {领域事件} |


#### 2.1.1 方法：{方法 1}

**方法签名**

```typescript
{方法名}(params: { {参数1}: {类型1}, {参数2}: {类型2} }): {返回类型}
```

**职责描述**

{详细描述服务的核心职责}


**业务含义**：{行为的业务含义描述}

**前置条件**
- {前置条件1}
- {前置条件2}

**后置条件**
- 状态 = {新状态}
- {属性1} = params.{参数1}


**约束定义**

| 约束ID | 类型 | 描述 | 伪代码 | 执行时机 |
|-------|------|------|-------|---------|
| BIZ-{服务缩写}-01 | 业务规则 | {约束描述} | `ASSERT {条件表达式}` | 执行时 |


### 2.2 {领域服务名称2} 详细设计

（内容结构同上）

---


## 3. 领域服务用例设计

### 3.1 {领域服务名称1} 用例设计

#### 3.1.1 方法：{方法 1}

**Case-{服务缩写}-N1: {正向场景}**

| Given | When | Then | 验证约束 |
|-------|------|------|---------|
| {前置条件} | {方法名}({参数}={值}) | {结果描述} | BIZ-{服务缩写}-01 ✓ |

**Case-{服务缩写}-B1: {约束违反场景}**

| Given | When | Then | 违反约束 |
|-------|------|------|---------|
| {前置条件} | {方法名}({参数}={非法值}) | 拒绝，"{错误信息}" | BIZ-{服务缩写}-01 ✗ |

**Case-{服务缩写}-E1: 边界场景**

| Given | When | Then | 验证约束 |
|-------|------|------|---------|
| {边界条件} | {方法名}({参数}={边界值}) | {结果描述} | BIZ-{服务缩写}-01 ✓ |


### 3.2 {领域服务名称2} 用例设计
（内容结构同上）